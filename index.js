chrome.tabs.query({active: true, lastFocusedWindow: true}, tabs => {
    let u = tabs[0].url;
    // use `url` here inside the callback because it's asynchronous!
    document.getElementById("url").innerHTML = u
//     fetch('http://localhost:3000/')
//   .then(response => response.json())
//   .then(data => console.log(data));

  var url = new URL('http://localhost:3000/')

var params = {link:u} // or:

url.search = new URLSearchParams(params).toString();

fetch(url).then(response =>response.json)
});

